<!doctype html>
<html>
    <head>
        <title>Basic BehaviourController</title>
    </head>
    <body>


        <!-- Clock behaviour HTML, Clock is inactive when element size is smaller than 500 pixels -->
        <div style="width:50%">
            <p data-behaviour="ui.Clock" data-conditions='{"element":{"minWidth":500}}'>Clock is inactive</p>
        </div>

        <p>
            <!-- ClearField behaviour HTML, ClearField is inactive when window size is smaller than 400 pixels or wider than 700 pixels -->
            <input type="text" data-behaviour="ui.ClearField" data-conditions='{"window":{"minWidth":400,"maxWidth":700}}'>
        </p>

        <!-- Map behaviour HTML, Map is inactive when no geolocation support or window size is smaller than 400 pixels or wider than 700 pixels -->
        <p>
            <div data-behaviour="ui.Map" data-conditions='{"location":{"geolocation":true},"window":{"minWidth":400,"maxWidth":700}}'>Map is inactive</div>
        </p>


        <script src="js/bc/shim/Bind.js"></script>
        <script src="js/bc/helper/Namespace.js"></script>
        <script src="js/bc/helper/Observer.js"></script>
        <script src="js/bc/helper/ResponsiveWindow.js"></script>
        <script src="js/bc/helper/ScriptLoader.js"></script>
        <script src="js/bc/core/OptionsController.js"></script>
        <script src="js/bc/core/BehaviourBase.js"></script>
        <script src="js/bc/core/BehaviourLoader.js"></script>
        <script src="js/bc/core/BehaviourConditions.js"></script>
        <script src="js/bc/core/BehaviourController.js"></script>

        <!-- ClearField control is embedded -->
        <script src="js/ui/ClearField.js"></script>
        <script src="js/ui/Clock.js"></script>

        <!-- Note that the Map class has been commented, it will be loaded dynamically when conditions are met -->
        <!-- <script src="js/ui/Map.js"></script>-->



        <!-- Behaviour start and configuration point -->
        <script>

            new bc.core.BehaviourController(
                {
                    'bc_core_BehaviourLoader':
                    {
                        'url':
                        {
                            // path to js root to allow dynamic loading of js files
                            'js':'js/'
                        }
                    },
                    'bc_core_BehaviourConditions':
                    {
                        'window':
                        {
                            // links <event> to returned <object>
                            // <element> is passed as first param, this way it's possible to bind to element or children of element
                            'event':{
                                'resize':function(element){return new bc.helper.ResponsiveWindow();}
                            },
                            // link <key> to condition
                            // <element> is passed as first param by default, second param is value in data-conditions attribute
                            'condition':{
                                'minWidth':function(element,value){return value >= window.innerWidth;},
                                'maxWidth':function(element,value){return value <= window.innerWidth;}
                            }
                        },
                        'element':
                        {
                            'event':{
                                'resize':function(element){return window;}
                            },
                            'condition':{
                                'minWidth':function(element,value){return value >= element.offsetWidth;}
                            }
                        },
                        'location':
                        {
                            'condition':{
                                'geolocation':function(value){return Boolean(navigator.geolocation)===value;}
                            }
                        }
                    }
                }
            );

        </script>
    </body>
</html>