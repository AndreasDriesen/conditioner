<!DOCTYPE html>
<html>
<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">

    <title>Docs - Conditioner</title>

    <link href="../css/rainbow/github.css" rel="stylesheet">
    <link href="../css/styles.css" rel="stylesheet">

    <script>

        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-33378673-2', 'github.io');
        ga('send', 'pageview');

    </script>

</head>
<body>

<h1 class="logo"><a href="/">ConditionerJS</a></h1>

<div class="git">
<iframe src="http://ghbtns.com/github-btn.html?user=rikschennink&repo=conditioner&type=watch&count=true"
    allowtransparency="true" frameborder="0" scrolling="0" width="78" height="20"></iframe>
</div>



<section>

<h1 id="introduction" class="title">Documentation</h1>

<nav class="index">

    <ul>
        <li><a href="#setup">Setup</a></li>
        <li>
            <a href="#config">Configuring Modules</a>
            <ul>
                <li><a href="#data-module">Linking a module</a></li>
                <li><a href="#data-conditions">Setting conditions</a></li>
                <li><a href="#data-options">Passing options</a></li>
                <li><a href="#data-priority">Altering priorities</a></li>
            </ul>
        </li>
        <li>
            <a href="#api">JavaScript API</a>
            <ul>
                <li><a href="#conditioner">Conditioner</a></li>
                <li><a href="#node">Node</a></li>
                <li><a href="#module-controller">ModuleController</a></li>
                <li><a href="#module-base">ModuleBase</a></li>
            </ul>
        </li>
    </ul>
</nav>



<section><!-- setup section -->

<h2 id="setup">Setup</h2>

<p>The setup of ConditionerJS is a two step process.</p>

<p>As ConditionerJS needs RequireJS to function, download RequireJS at <a href="http://requirejs.org/docs/download.html">http://requirejs.org/</a>, if you haven't played around with RequireJS before, follow the
<a href="http://requirejs.org/docs/start.html">Getting Started</a> guide for a quick meet and greet.</p>

<p>Now you've got a feel for RequireJS it is time to setup ConditionerJS.</p>

<p>RequireJS needs to know where to find the ConditionerJS framework. You'll need to add a <code>path</code> entry to the RequireJS configuration object pointing to the location of ConditionerJS. In the example below the file 'conditioner.js' is located in the 'lib' folder within the generic 'js' folder.</p>

<pre><code data-language="javascript">requirejs.config({
    baseUrl:'js/',
    paths:{
        conditioner:'lib/conditioner'
    }
});</code></pre>

<p>Now that's setup, you can request a conditioner reference and have it start loading modules.</p>

<pre><code data-language="javascript">requirejs(['conditioner'],function(conditioner) {
    conditioner.loadModules(document);
});</code></pre>

<p>Since we've not yet <a href="#config">configured our modules</a> it will not load anything for now.</p>

</section><!-- end setup section -->












<section><!-- module configuration -->

<h2 id="config">Module Configuration</h2>

<p>Configuring your <a href="http://requirejs.org/docs/api.html#define" target="_blank">RequireJS Modules</a> so ConditionerJS can load them is done through data attributes. The following sections guide you through the configuration of a typical module.</p>

<nav class="sub">
    <ul>
        <li><a href="#data-module">Linking a module to the DOM</a></li>
        <li><a href="#data-conditions">Setting module conditions</a></li>
        <li><a href="#data-options">Passing options to a module</a></li>
        <li><a href="#data-priority">Altering load priority</a></li>
    </ul>
</nav>



<section><!-- linking -->

<h3 id="data-module">Linking a module to the DOM <span class="code">data-module</span></h3>
<p>To have a module loaded at a specific location in the DOM you use the <code>data-module</code> attribute. The content of the <code>data-module</code> attribute points to the location of the module.</p>

<pre><code data-language="html">&lt;a data-module="ui/Map"&gt; ... &lt;/a&gt;</code></pre>

<p>You can also use a shortcut name, should the module path change you would only have to change it at one location.</p>

<pre><code data-language="javascript">conditioner.setOptions({
    'modules':{
        'ui/Map':'IMap'
    }
});
</code></pre>

<p>The <code>data-module</code> attribute would now look like this:</p>

<pre><code data-language="html">&lt;a data-module="IMap"&gt; ... &lt;/a&gt;</code></pre>

</section><!-- end linking -->



<section><!-- conditions -->

<h3 id="data-conditions">Setting module conditions <span class="code">data-conditions</span></h3>
<p>The <code>data-conditions</code> attribute allows you to control the conditions under which a module is loaded. This is what ConditionerJS is all about.</p>

<p>The example below tells ConditionerJS to only load the module if the media query <code>(min-width:30em)</code> is matched.
</p>

<pre><code data-language="html">&lt;a data-module="ui/Map" data-conditions="media:{(min-width:30em)}"&gt; ... &lt;/a&gt;</code></pre>

<p>Tests within conditions are formatted like this: <code>&lt;test_name&gt;:{&lt;expected_value&gt;}</code></p>

<p>To make conditions more powerful it is possible to combine multiple tests together forming complex conditions.</p>


<h4>Combining Tests</h4>

<p>ConditionerJS allows combining of tests to build more complex conditions.</p>

<p>Link multiple tests using the <code>and</code> or <code>or</code> operators:</p>
<pre><code>foo:{bar} or foo:{bar} and foo:{bar}</code></pre>

<p>Group tests using brackets to override operator precedence: </p>
<pre><code>foo:{bar} or (foo:{bar} and foo:{bar})</code></pre>

<p>Use the <code>not</code> operator to negate a test or test group:
<pre><code>not (foo:{bar} or foo:{bar}) and not foo:{bar}</code></pre>

<h4>Default Tests</h4>

<p>Currently a couple of tests are available to use within these conditions. See the <a href="index.html#examples">example section</a> on how to combine them.</p>
<ul>
    <li><span class="code">Element</span> <code>min-width</code>, <code>max-width</code> and <code>seen</code></li>
    <li><span class="code">Media</span> <code>mediaquery</code> and <code>supported</code></li>
    <li><span class="code">Window</span> <code>min-width</code> and <code>max-width</code></li>
    <li><span class="code">Pointer</span> <code>available</code></li>
</ul>


</section><!-- end conditions -->










<h3 id="data-options">Passing options to a module <span class="code">data-options</span></h3>

<p>The <code>data-options</code> attribute allows you to set specific options to be passed to the Module when it's loaded.</p>

<p>Specifying specific options for a single module at node level:</p>
<pre><code data-language="html">&lt;a data-module="ui/Map" data-options='{"zoom":10}'&gt; ... &lt;/a&gt;</code></pre>

<p>Specifying generic options for mulitple modules of a certain type:</p>
<pre><code data-language="javascript">conditioner.setOptions({
'modules':{
    'ui/Map':{
    'options':{
            'zoom':5
        }
    }
}
});</code></pre>

<p>ConditionerJS will merge page level options with node level options and pass the results to the loaded Module once it ready to be loaded.</p>

<p>In the (not so exciting) example above the resulting option object would be <code>{"zoom":10}</code>, since node level options take precendence over page level options zoom level <code>10</code> overwrites zoom level <code>5</code>.</p>











<h3 id="data-priority">Altering load priorities <span class="code">data-priority</span></h3>

<p>The <code>data-priority</code> attributes allows you to control the order in which a node is handled. Positive numbers give a node priority over other nodes, a negative number moves it to the back of the initialisation queue.</p>

<p>Suppose you have a certain module you want to start loading earlier but is located lower in the DOM tree you can now move it up the list.</p>

<pre><code data-language="html">&lt;a data-module="ui/Map" data-priority="2"&gt; ... &lt;/a&gt;</code></pre>




</section><!-- end module configuration -->






<section>
<h2 id="api">JavaScript API</h2>

<p>ConditionerJS consists of a group of publicly accessible JavaScript Classes. These Classes allow you to safely access modules once they've been parsed. The starting point to load modules is always the <code>conditioner</code> object of which there is only one instance.</p>

<nav class="sub code">
    <ul>
        <li><a href="#conditioner">conditioner</a> : object</li>
        <li><a href="#node">Node</a> : Class</li>
        <li><a href="#module-controller">ModuleController</a> : Class</li>
        <li><a href="#module-base">ModuleBase</a> : Class</li>
    </ul>
</nav>




<section>

    <h3 class="code" id="conditioner">conditioner</h3>
    <p>Call <code>loadModules(document)</code> on the conditioner object to start loading the modules defined in the HTML document. Once this is done the conditioner will return the array of
        Nodes it found and will initialize them once they are ready.</p>

    <p>Each <a href="#node">Node</a> contains one or more ModuleControllers, for each Node only one <a href="#module-controller">ModuleController</a> can have an active
        <a href="#module-base">Module</a>.</p>

    <p>The following methods are available on the conditioner object.</p>

    <nav class="sub code">
        <ul>
            <li><a href="#conditioner-set-options">setOptions(object)</a></li>
            <li><a href="#conditioner-load-modules">loadModules(context)</a> &rarr; Array</li>
            <li><a href="#conditioner-get-node">getNode(selector)</a> &rarr; <a href="#node">Node</a> | null</li>
            <li><a href="#conditioner-get-nodes-all">getNodesAll(selector)</a> &rarr; Array</li>
        </ul>
    </nav>

    <h4 class="code" id="conditioner-set-options">setOptions</h4>
    <p>Allows defining of page level Module options and shortcuts to modules.</p>
<pre><code data-language="javascript">/**
* Set conditioner options
* @param {object} options
* @public
*/
conditioner.setOptions({
    'modules':{
        'ui/Clock':'IClock',
            'ui/Map':{
                'alias':'IMap',
                'options':{
                    'zoom':10
            }
        }
    }
});</code></pre>



<h4 class="code" id="conditioner-load-modules">loadModules</h4>
<p>Finds and loads all Modules defined on child elements of the supplied context. Returns an array of found Nodes.</p>
<pre><code data-language="javascript">/**
* Loads modules found within the given context
* @param {element} context - Context to search for modules
* @return {Array} - Array of found Nodes
*/
conditioner.loadModules(context);</code></pre>



<h4 class="code" id="conditioner-get-node">getNode</h4>
<p>Returns a single Node matching the supplied selector.</p>
<pre><code data-language="javascript">/**
* Returns the first Node matching the selector
* @param {string} selector - Selector to match the nodes to
* @return {Node} First matched node
*/
conditioner.getNode(selector);</code></pre>



<h4 class="code" id="conditioner-get-nodes-all">getNodesAll</h4>
<p>Returns an Array of found Nodes matching the supplied selector.</p>
<pre><code data-language="javascript">/**
* Returns all nodes matching the selector
* @param {string} selector - Optional selector to match the nodes to
* @return {Array} Array containing matched nodes
*/
conditioner.getNodesAll(selector);</code></pre>


</section>


<section>

<h3 class="code" id="node">Node</h3>

<p>For each element found having a <code>data-module</code> attribute an object of type Node is made. The node object can then be queried for the ModuleControllers it contains.</p>

<nav class="sub code">
    <ul>
        <li><a href="#node-get-active-module-controller">getActiveModuleController</a> &rarr; <a href="#module-controller">ModuleController</a> | null</li>
        <li><a href="#node-get-module-controller-by-path">getModuleControllerByPath</a> &rarr; <a href="#module-controller">ModuleController</a> | null</li>
        <li><a href="#node-get-module-controller-all-by-path">getModuleControllersByPath</a> &rarr; Array</li>
        <li><a href="#node-matches-selector">matchesSelector</a> &rarr; boolean</li>
        <li><a href="#node-execute">execute</a> &rarr; object</li>
    </ul>
</nav>

<h4 class="code" id="node-get-active-module-controller">getActiveModuleController</h4>
<p>Returns a reference to the currently active ModuleController.</p>
<pre><code data-language="javascript">/**
* Returns a reference to the currently active module controller
* @return {ModuleController}
* @public
*/
node.getActiveModuleController();</code></pre>


<h4 class="code" id="node-get-module-controller-by-path">getModuleControllerByPath</h4>
<p>Finds and returns the first module to match the supplied path.</p>
<pre><code data-language="javascript">/**
* Returns the first module controller matching the given path
* @param path {string} path to module
* @return {ModuleController}
* @public
*/
node.getModuleControllerByPath(path);</code></pre>


<h4 class="code" id="node-get-module-controller-all-by-path">getModuleControllerAllByPath</h4>
<p>Finds all ModuleControllers matching the supplied path and returns them as an array.</p>
<pre><code data-language="javascript">/**
* Returns an array of ModuleControllers matching the given path
* @param path {string} path to module
* @return {Array}
* @public
*/
node.getModuleControllerAllByPath(path);</code></pre>


<h4 class="code" id="node-matches-selector">matchesSelector</h4>
<p>Tests if the element contained in the Node object matches the supplied CSS selector.</p>
<pre><code data-language="javascript">/**
* Public method to check if the module matches the given query
* @param {string} selector
* @return {boolean}
* @public
*/
node.matchesSelector(selector);</code></pre>


<h4 class="code" id="node-execute">execute</h4>
<p>Safely tries to executes a method on the currently active Module. Always returns an object containing a status code and a response data property.</p>
<pre><code data-language="javascript">/**
* Public method for safely executing methods on the loaded module
* @param {string} method - method key
* @param {Array} params - array containing the method parameters
* @return {object} returns object containing status code and possible response data
* @public
*/
node.execute(method,[params]);</code></pre>

</section>




<section>

    <h3 class="code" id="module-controller">ModuleController</h3>

    <p>The ModuleController loads and unloads the contained Module based on the conditions received. It propagates events from the contained Module so you can safely subscribe to them.</p>
    <nav class="sub code">
        <ul>
            <li><a href="#module-controller-matches-path">matchesPath</a> &rarr; boolean</li>
            <li><a href="#module-controller-is-active">isActive</a> &rarr; boolean</li>
            <li><a href="#module-controller-load">load</a></li>
            <li><a href="#module-controller-unload">unload</a> &rarr; boolean</li>
            <li><a href="#module-controller-execute">execute</a> &rarr; object</li>
        </ul>
    </nav>

<h4 class="code" id="module-controller-matches-path">matchesPath</h4>
<p>Returns true if the ModuleController is in charge of a module with the given path.</p>
<pre><code data-language="javascript">/**
* Checks if the module matches the path
* @param {string} path - path of module to test for
* @return {boolean} if matched
* @public
*/
moduleController.matchesPath(path);</code></pre>

<h4 class="code" id="module-controller-is-active">isActive</h4>
<p>Returns true if the module contained within the ModuleController is currently loaded.</p>
<pre><code data-language="javascript">/**
* Returns true if module is currently active and loaded
* @returns {boolean}
* @public
*/
moduleController.isActive();</code></pre>

<h4 class="code" id="module-controller-load">load</h4>
<p>Loads the Module if it's available (if conditions suitable). Publishes the 'load' event once finished.</p>
<pre><code data-language="javascript">/**
* Load the module contained in this ModuleController
* @public
* @fires load
*/
moduleController.load();</code></pre>

<h4 class="code" id="module-controller-unload">unload</h4>
<p>Unloads the Module if it's not already unloaded. Publishes the 'unload' event once done.</p>
<pre><code data-language="javascript">/**
* Unloads the Module
* @fires unload
* @return {boolean}
* @public
*/
moduleController.unload();</code></pre>

<h4 class="code" id="module-controller-execute">execute</h4>
<p>Safely tries to execute a method on the module contained within the ModuleController.</p>
<pre><code data-language="javascript">/**
* Executes a methods on the loaded module
* @param {string} method - method key
* @param {Array} params - optional array containing the method parameters
* @return {object} containing response of executed method and a status code
* @public
*/
moduleController.execute(method,[params]);</code></pre>

</section>



<section>

<h3 id="module-base">ModuleBase</h3>

<nav class="sub code">
    <ul>
        <li><a href="#module-constructor">constructor</a> &rarr; object</li>
        <li><a href="#module-unload">unload</a></li>
    </ul>
</nav>



<h4 class="code">Constructor</h4>
<p>The ModuleBase contructor takes two parameters, an element and an optional options object.</p>
<p>ModuleBase is an abstract Class, UI Modules used in the framework should inherit from this Class.</p>
<pre><code data-language="javascript">/**
* @class
* @constructor
* @param {element} element - DOM Element to apply this behavior to
* @param {object} options - Custom options to pass to this behavior
* @abstract
*/
ModuleBase.call(this,element,options);</code></pre>


<h4 class="code">Unload</h4>
<p>The <code>ModuleController</code> will call the <code>unload</code> method once the conditions for the Module are no longer valid. Use this method to clean up events attached by the Module and restore the original element state.</p>

<pre><code data-language="javascript">/**
* Unloads module by removing data initialized property
* Override to clean up your module.
* @public
*/
module.unload();</code></pre>

</section>



</section>









<!-- For pretty javascript code examples -->
<script src="../js/lib/ccampbell/rainbow/rainbow-custom.min.js"></script>


</body>
</html>